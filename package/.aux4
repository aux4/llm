{
  "scope": "aux4",
  "name": "ai-agent",
  "version": "0.1.16",
  "description": "AI agent",
  "tags": [
    "ai",
    "agent",
    "llm"
  ],
  "profiles": [
    {
      "name": "main",
      "commands": [
        {
          "name": "ai",
          "execute": [
            "profile:ai"
          ],
          "help": {
            "text": "Artificial Intelligence"
          }
        }
      ]
    },
    {
      "name": "ai",
      "commands": [
        {
          "name": "agent",
          "execute": [
            "profile:ai:agent"
          ],
          "help": {
            "text": "Artificial Intelligence Agent"
          }
        }
      ]
    },
    {
      "name": "ai:agent",
      "commands": [
        {
          "name": "learn",
          "execute": [
            "node ${packageDir}/lib/aux4-ai-agent.cjs learn values(storage, doc, type)"
          ],
          "help": {
            "text": "Learn about a document",
            "variables": [
              {
                "name": "storage",
                "text": "The storage directory",
                "default": ".llm"
              },
              {
                "name": "doc",
                "text": "The document to learn from",
                "arg": true
              },
              {
                "name": "type",
                "text": "The type of document",
                "default": ""
              }
            ]
          }
        },
        {
          "name": "search",
          "execute": [
            "node ${packageDir}/lib/aux4-ai-agent.cjs search values(storage, format, source, limit, query)"
          ],
          "help": {
            "text": "Search on documents",
            "variables": [
              {
                "name": "storage",
                "text": "The storage directory",
                "default": ".llm"
              },
              {
                "name": "format",
                "text": "The format of the output",
                "default": "text",
                "options": [
                  "json",
                  "text"
                ]
              },
              {
                "name": "source",
                "text": "The source file path",
                "default": ""
              },
              {
                "name": "limit",
                "text": "The number of results to return",
                "default": "1"
              },
              {
                "name": "query",
                "text": "The query to search for",
                "arg": true
              }
            ]
          }
        },
        {
          "name": "forget",
          "execute": [
            "rm -f ${storage}/docstore.json ${storage}/faiss.index ${forget}/ids.json"
          ],
          "help": {
            "text": "Forget about the learned documents",
            "variables": [
              {
                "name": "storage",
                "text": "storage directory",
                "default": ".llm"
              }
            ]
          }
        },
        {
          "name": "ask",
          "execute": [
            "stdin:node ${packageDir}/lib/aux4-ai-agent.cjs ask values(instructions, role, history, outputSchema, question, image, context, model, storage)"
          ],
          "help": {
            "text": "Ask your question",
            "variables": [
              {
                "name": "instructions",
                "text": "The instructions file of the prompt",
                "default": "instructions.md"
              },
              {
                "name": "role",
                "text": "The role of the user",
                "default": "user"
              },
              {
                "name": "history",
                "text": "The file to use as history",
                "default": ""
              },
              {
                "name": "outputSchema",
                "text": "The file that represents the JSON schema of the output",
                "default": "schema.json"
              },
              {
                "name": "context",
                "text": "Read context from stdin",
                "default": "false"
              },
              {
                "name": "image",
                "text": "The image path, if more than one, separate with comma",
                "default": ""
              },
              {
                "name": "storage",
                "text": "The storage directory",
                "default": ".llm"
              },
              {
                "name": "question",
                "text": "The question to ask",
                "arg": true
              }
            ]
          }
        },
        {
          "name": "image",
          "execute": [
            "node ${packageDir}/lib/aux4-ai-agent.cjs image values(prompt, image, size, quality, context, model, quantity)"
          ],
          "help": {
            "text": "Generate an image from a text prompt",
            "variables": [
              {
                "name": "prompt",
                "text": "The text prompt describing the image to generate",
                "arg": true
              },
              {
                "name": "image",
                "text": "The file path where to save the generated image"
              },
              {
                "name": "size",
                "text": "The image size (e.g., 1024x1024, 1792x1024, 1024x1792)",
                "default": "1024x1024"
              },
              {
                "name": "quality",
                "text": "The image quality (DALL-E: standard/hd, gpt-image: low/medium/high/auto)",
                "default": "auto",
                "options": [
                  "standard",
                  "hd",
                  "low",
                  "medium",
                  "high",
                  "auto"
                ]
              },
              {
                "name": "context",
                "text": "Read additional context from stdin",
                "default": "false"
              },
              {
                "name": "model",
                "text": "Model configuration as JSON (e.g., {\"type\":\"openai\",\"config\":{\"model\":\"dall-e-3\"}})",
                "default": "{}"
              },
              {
                "name": "quantity",
                "text": "Number of images to generate (creates numbered files if > 1)",
                "default": "1"
              }
            ]
          }
        },
        {
          "name": "chat",
          "execute": [
            "set:question=${text}",
            "log:> ${text}",
            "stdin:aux4 ai agent ask params(instructions, role, history, outputSchema, text, image, context, question, model, storage)",
            "stdin:if(text==exit) && echo exit || aux4 ai agent chat params(instructions, role, history, outputSchema, image, context, model, storage)"
          ],
          "help": {
            "text": "Chat with the AI agent",
            "variables": [
              {
                "name": "instructions",
                "text": "The instructions file of the prompt",
                "default": "instructions.md"
              },
              {
                "name": "role",
                "text": "The role of the user",
                "default": "user"
              },
              {
                "name": "history",
                "text": "The file to use as history",
                "default": "history.json"
              },
              {
                "name": "outputSchema",
                "text": "The file that represents the JSON schema of the output",
                "default": "schema.json"
              },
              {
                "name": "context",
                "text": "Read context from stdin",
                "default": "false"
              },
              {
                "name": "image",
                "text": "The image path, if more than one, separate with comma",
                "default": ""
              },
              {
                "name": "storage",
                "text": "The storage directory",
                "default": ".llm"
              },
              {
                "name": "model",
                "text": "Model configuration as JSON (e.g., {\"type\":\"openai\",\"config\":{\"model\":\"gpt-4\"}})",
                "default": "{}"
              },
              {
                "name": "text",
                "text": "The text",
                "arg": true
              }
            ]
          }
        },
        {
          "name": "history",
          "execute": [
            "node ${packageDir}/lib/aux4-ai-agent.cjs history values(historyFile)"
          ],
          "help": {
            "text": "Display a formatted view of conversation history",
            "variables": [
              {
                "name": "historyFile",
                "text": "The history JSON file to display",
                "default": "history.json",
                "arg": true
              }
            ]
          }
        }
      ]
    }
  ]
}
