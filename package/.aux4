{
  "scope": "aux4",
  "name": "ai-worker",
  "version": "0.0.3",
  "description": "AI worker for LLMs",
  "tags": [
    "ai",
    "worker",
    "llm"
  ],
  "profiles": [
    {
      "name": "main",
      "commands": [
        {
          "name": "ai",
          "execute": [
            "profile:ai"
          ],
          "help": {
            "text": "Artificial Intelligence"
          }
        }
      ]
    },
    {
      "name": "ai",
      "commands": [
        {
          "name": "worker",
          "execute": [
            "profile:ai:worker"
          ],
          "help": {
            "text": "Artificial Intelligence Worker"
          }
        }
      ]
    },
    {
      "name": "ai:worker",
      "commands": [
        {
          "name": "learn",
          "execute": [
            "node ${packageDir}/lib/aux4-ai-worker.cjs learn values(storage, doc, type)"
          ],
          "help": {
            "text": "Learn about a document",
            "variables": [
              {
                "name": "storage",
                "text": "The storage directory",
                "default": ".llm"
              },
              {
                "name": "doc",
                "text": "The document to learn from",
                "arg": true
              },
              {
                "name": "type",
                "text": "The type of document",
                "default": ""
              }
            ]
          }
        },
        {
          "name": "search",
          "execute": [
            "node ${packageDir}/lib/aux4-ai-worker.cjs search values(storage, format, source, limit, query)"
          ],
          "help": {
            "text": "Search on documents",
            "variables": [
              {
                "name": "storage",
                "text": "The storage directory",
                "default": ".llm"
              },
              {
                "name": "format",
                "text": "The format of the output",
                "default": "text",
                "options": [
                  "json",
                  "text"
                ]
              },
              {
                "name": "source",
                "text": "The source file path",
                "default": ""
              },
              {
                "name": "limit",
                "text": "The number of results to return",
                "default": "1"
              },
              {
                "name": "query",
                "text": "The query to search for",
                "arg": true
              }
            ]
          }
        },
        {
          "name": "forget",
          "execute": [
            "rm -f ${storage}/docstore.json ${storage}/faiss.index ${forget}/ids.json"
          ],
          "help": {
            "text": "Forget about the learned documents",
            "variables": [
              {
                "name": "storage",
                "text": "storage directory",
                "default": ".llm"
              }
            ]
          }
        },
        {
          "name": "ask",
          "execute": [
            "stdin:node ${packageDir}/lib/aux4-ai-worker.cjs ask values(instructions, role, history, outputSchema, question, image, context, model)"
          ],
          "help": {
            "text": "Ask your question",
            "variables": [
              {
                "name": "instructions",
                "text": "The instructions file of the prompt",
                "default": "instructions.txt"
              },
              {
                "name": "role",
                "text": "The role of the user",
                "default": "user"
              },
              {
                "name": "history",
                "text": "The file to use as history",
                "default": ""
              },
              {
                "name": "outputSchema",
                "text": "The file that represents the JSON schema of the output",
                "default": "schema.json"
              },
              {
                "name": "context",
                "text": "Read context from stdin",
                "default": "false"
              },
              {
                "name": "image",
                "text": "The image path, if more than one, separate with comma",
                "default": ""
              },
              {
                "name": "question",
                "text": "The question to ask",
                "arg": true
              }
            ]
          }
        }
      ]
    }
  ]
}
